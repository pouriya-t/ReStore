{"version":3,"sources":["app/components/AppPagination.js","app/components/CheckboxButtons.js","app/components/RadioButtonGroup.js","app/layout/LoadingComponent.js","features/contact/counterSlice.js","app/models/pagination.js","app/api/agent.js","app/util/util.js","features/basket/basketSlice.js","features/catalog/catalogSlice.js","features/account/accountSlice.js","app/store/configureStore.js","features/catalog/ProductCard.js","features/catalog/ProductCardSkeleton.js","features/catalog/ProductList.js","features/catalog/ProductSearch.js","app/hooks/useProducts.js","features/catalog/Catalog.js","app/layout/SignedInMenu.js","app/layout/Header.js","features/home/HomePage.js","app/errors/NotFound.js","features/catalog/ProductDetails.js","features/about/AboutPage.js","features/contact/ContactPage.js","app/errors/ServerError.js","features/basket/BasketSummary.js","features/basket/BasketTable.js","features/basket/BasketPage.js","features/account/Login.js","features/account/Register.js","app/layout/PrivateRoute.js","features/orders/OrderDetailed.js","features/orders/Orders.js","app/components/AppCheckbox.js","app/components/AppTextInput.js","features/checkout/AddressForm.js","features/checkout/StripeInput.js","features/checkout/PaymentForm.js","features/checkout/Review.js","features/checkout/checkoutValidation.js","features/checkout/CheckoutPage.js","features/checkout/CheckoutWrapper.js","features/admin/productValidation.js","app/components/AppSelectList.js","app/components/AppDropzone.js","features/admin/ProductForm.js","features/admin/Inventory.js","app/layout/App.js","reportWebVitals.js","index.js"],"names":["AppPagination","metaData","onPageChange","currentPage","totalCount","totalPages","pageSize","useState","pageNumber","setPageNumber","Box","display","justifyContent","alignItems","sx","pb","Typography","Pagination","color","size","count","page","onChange","e","handlePageChange","CheckboxButtons","items","checked","checkedItems","setCheckedItems","FormGroup","map","item","FormControlLabel","control","Checkbox","indexOf","onClick","value","newChecked","findIndex","filter","handleChecked","label","RadioButtonGroup","options","selectedValue","FormControl","component","FormLabel","RadioGroup","Radio","LoadingComponent","message","Backdrop","open","invisible","height","CircularProgress","variant","position","top","counterSlice","createSlice","name","initialState","data","title","reducers","increment","state","action","payload","decrement","actions","PaginatedResponse","this","axios","defaults","baseURL","process","withCredentials","responseBody","response","interceptors","request","use","config","token","store","getState","account","user","headers","Authorization","a","pagination","JSON","parse","error","status","errors","modelStateErrors","key","push","flat","toast","history","pathname","Promise","reject","requests","url","params","get","then","body","post","delete","put","createFormData","formData","FormData","append","Basket","addItem","productId","quantity","removeItem","agent","Catalog","list","details","id","fetchFilters","TestErrors","get400Error","get401Error","get404Error","get500Error","getValidationError","Account","login","values","register","currentUser","fetchAddress","Orders","fetch","create","Payments","createPaymentIntent","Admin","createProduct","product","updateProduct","deleteProduct","currencyFormat","amount","toFixed","fetchBasketAsync","createAsyncThunk","_","thunkAPI","rejectWithValue","condition","b","document","cookie","match","pop","getCookie","addBasketItemAsync","removeBasketItemAsync","basketSlice","basket","setBasket","clearBasket","extraReducers","builder","addCase","pending","meta","arg","fulfilled","itemIndex","i","undefined","splice","rejected","console","log","addMatcher","isAnyOf","productsAdapter","createEntityAdapter","getAxiosParams","productParams","URLSearchParams","toString","orderBy","searchTerm","brands","length","types","fetchProductsAsync","catalog","dispatch","setMetaData","fetchProductAsync","catalogSlice","getInitialState","productsLoaded","filtersLoaded","setProductParams","resetProductParams","setProduct","upsertOne","removeProduct","removeOne","setAll","productSelectors","getSelectors","signInUser","userDto","localStorage","setItem","stringify","fetchCurrentUser","setUser","getItem","accountSlice","signOut","roles","atob","split","configureStore","reducer","counter","useAppDispatch","useDispatch","useAppSelector","useSelector","ProductCard","Card","maxWidth","CardHeader","avatar","Avatar","bgcolor","charAt","toUpperCase","titleTypographyProps","fontWeight","CardMedia","backgroundSize","image","pictureUrl","CardContent","gutterBottom","price","brand","type","CardActions","LoadingButton","loading","Button","Link","to","ProductCardSkeleton","xs","Skeleton","animation","width","style","marginBottom","ProductList","products","Grid","container","spacing","ProductSearch","setSearchTerm","debouncedSearch","debounce","event","target","TextField","fullWidth","useProducts","selectAll","useEffect","sortOptions","columnSpacing","Paper","mb","p","SignedInMenu","anchorEl","setAnchorEl","Boolean","handleClose","currentTarget","typography","email","Menu","onClose","TransitionComponent","Fade","MenuItem","midLinks","path","rightLinks","navStyles","textDecoration","Header","darkMode","setDarkMode","itemCount","reduce","sum","AppBar","Toolbar","NavLink","exact","Switch","List","sm","ListItem","includes","IconButton","Badge","badgeContent","ShoppingCart","HomePage","dots","infinite","speed","slidesToShow","slidesToScroll","src","alt","maxHeight","NotFound","Container","Divider","ProductDetails","props","parseInt","selectById","productStatus","setQuantity","find","TableContainer","Table","TableBody","TableRow","TableCell","description","quantityInStock","disabled","updatedQuantity","AboutPage","validationErrors","setValidationErrors","ButtonGroup","catch","Alert","severity","AlertTitle","ListItemText","ContactPage","ServerError","useHistory","useLocation","detail","BasketSummary","subtotal","deliveryFee","colSpan","align","fontStyle","BasketTable","isBasket","minWidth","TableHead","border","scope","marginRight","Remove","Add","Delete","BasketPage","direction","paddingBottom","Login","location","useForm","mode","handleSubmit","formState","isSubmitting","isValid","from","flexDirection","m","onSubmit","noValidate","mt","margin","autoFocus","required","username","helperText","password","Register","setError","success","forEach","handleApiErrors","pattern","PrivateRoute","Component","rest","render","some","r","OrderDetailed","order","setSelectedOrder","orderItems","orderStatus","orders","setOrders","setLoading","selectedOrderNumber","setSelectedOrderNumber","finally","o","total","orderDate","AppCheckbox","field","useController","defaultValue","AppTextInput","fieldState","multiline","rows","AddressForm","useFormContext","isDirty","StripeInput","forwardRef","ref","elementRef","useRef","useImperativeHandle","focus","current","onReady","element","PaymentForm","cardState","onCardInputChange","md","elementError","cardNumber","autoComplete","InputLabelProps","shrink","InputProps","inputComponent","inputProps","CardNumberElement","cardExpiry","CardExpiryElement","cardCvc","CardCvcElement","Review","validationSchema","yup","fullName","address1","address2","city","zip","country","nameOnCard","steps","CheckoutPage","activeStep","setActiveStep","orderNumber","setOrderNumber","setCardState","cardComplete","setCardComplete","paymentMessage","setPaymentMessage","paymentSucceeded","setPaymentSucceeded","stripe","useStripe","elements","useElements","elementType","complete","currentValidationSchema","methods","resolver","yupResolver","submitOrder","saveAddress","shippingAddress","cardElement","getElement","confirmCardPayment","clientSecret","payment_method","card","billing_details","paymentResult","paymentIntent","reset","getValues","handleNext","handleBack","my","Stepper","pt","Step","StepLabel","step","Error","getStepContent","ml","stripePromise","loadStripe","CheckoutWrapper","moreThan","min","file","when","is","AppSelectList","InputLabel","Select","index","FormHelperText","AppDropzone","dzStyles","borderColor","borderRadius","paddingTop","onDrop","useCallback","acceptedFiles","Object","assign","preview","URL","createObjectURL","useDropzone","getRootProps","getInputProps","isDragActive","UploadFile","fontSize","ProductForm","cancelEdit","watch","watchFile","revokeObjectURL","Inventory","editMode","setEditMode","selectedProduct","setSelectedProduct","setTarget","setOpen","handleSelectProduct","startIcon","Edit","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","App","initApp","paletteType","theme","createTheme","palette","background","default","hideProgressBar","CssBaseline","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ef8c4317.chunk.js","sourcesContent":["import { Pagination, Typography } from \"@material-ui/core\";\r\nimport { Box } from \"@material-ui/system\";\r\nimport React, { useState } from \"react\";\r\n\r\nexport default function AppPagination({ metaData, onPageChange }) {\r\n  const { currentPage, totalCount, totalPages, pageSize } = metaData;\r\n  const [pageNumber, setPageNumber] = useState(currentPage);\r\n\r\n  function handlePageChange(page) {\r\n    setPageNumber(page);\r\n    onPageChange(page);\r\n  }\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      justifyContent=\"space-between\"\r\n      alignItems=\"center\"\r\n      sx={{ pb: 5 }}\r\n    >\r\n      <Typography>\r\n        Displaying {(currentPage - 1) * pageSize + 1} - {\"  \"}\r\n        {currentPage * pageSize > totalCount\r\n          ? totalCount\r\n          : currentPage * pageSize}{\" \"}\r\n        of {totalCount} items\r\n      </Typography>\r\n      <Pagination\r\n        color=\"secondary\"\r\n        size=\"large\"\r\n        count={totalPages}\r\n        page={pageNumber}\r\n        onChange={(e, page) => handlePageChange(page)}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { FormGroup, FormControlLabel, Checkbox } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function CheckboxButtons({ items, checked, onChange }) {\r\n  const [checkedItems, setCheckedItems] = useState(checked || []);\r\n\r\n  function handleChecked(value) {\r\n    const currentIndex = checkedItems.findIndex((item) => item === value);\r\n    let newChecked = [];\r\n    if (currentIndex === -1) newChecked = [...checkedItems, value];\r\n    else newChecked = checkedItems.filter((item) => item !== value);\r\n    setCheckedItems(newChecked);\r\n    onChange(newChecked);\r\n  }\r\n\r\n  return (\r\n    <FormGroup>\r\n      {items.map((item) => (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={checkedItems.indexOf(item) !== -1}\r\n              onClick={() => handleChecked(item)}\r\n            />\r\n          }\r\n          label={item}\r\n          key={item}\r\n        />\r\n      ))}\r\n    </FormGroup>\r\n  );\r\n}\r\n","import {\r\n  Radio,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormLabel,\r\n  RadioGroup,\r\n} from \"@material-ui/core\";\r\n\r\nexport default function RadioButtonGroup({ options, onChange, selectedValue }) {\r\n  return (\r\n    <FormControl component=\"fieldset\">\r\n      <FormLabel component=\"legend\">Gender</FormLabel>\r\n      <RadioGroup onChange={onChange} value={selectedValue}>\r\n        {options.map(({ value, label }) => (\r\n          <FormControlLabel\r\n            value={value}\r\n            control={<Radio />}\r\n            label={label}\r\n            key={value}\r\n          />\r\n        ))}\r\n      </RadioGroup>\r\n    </FormControl>\r\n  );\r\n}\r\n","import { Backdrop, CircularProgress, Typography } from \"@material-ui/core\";\r\nimport { Box } from \"@material-ui/system\";\r\n\r\nexport default function LoadingComponent({ message = \"Loading ...\" }) {\r\n  return (\r\n    <Backdrop open={true} invisible={true}>\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"100vh\"\r\n      >\r\n        <CircularProgress size={100} color=\"secondary\" />\r\n        <Typography\r\n          variant=\"h4\"\r\n          sx={{ justifyContent: \"center\", position: \"fixed\", top: \"60%\" }}\r\n        >\r\n          {message}\r\n        </Typography>\r\n      </Box>\r\n    </Backdrop>\r\n  );\r\n}\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  data: 42,\r\n  title: \"YARC (yet another redux counter with redux toolkit)\",\r\n};\r\n\r\n\r\nexport const counterSlice = createSlice({\r\n  name: \"counter\",\r\n  initialState,\r\n  reducers: {\r\n    increment: (state, action) => {\r\n      state.data += action.payload;\r\n    },\r\n    decrement: (state, action) => {\r\n      state.data -= action.payload;\r\n    },\r\n  },\r\n});\r\n\r\n\r\n\r\n\r\nexport const { increment, decrement } = counterSlice.actions;\r\n","export class PaginatedResponse {\r\n  items = null;\r\n  metaData = null;\r\n\r\n  constructor(items, metaData) {\r\n    this.items = items;\r\n    this.metaData = metaData;\r\n  }\r\n}\r\n","import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { history } from \"../..\";\r\nimport { PaginatedResponse } from \"../models/pagination\";\r\nimport { store } from \"../store/configureStore\";\r\n\r\nconst sleep = () => new Promise((resolve) => setTimeout(resolve, 500));\r\n// \"scripts\": {\r\n//   \"build\": \"BUILD_PATH='../API/wwwroot' react-scripts --openssl-legacy-provider build\"\r\n// },\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\naxios.defaults.withCredentials = true;\r\n\r\nconst responseBody = (response) => response.data;\r\n\r\naxios.interceptors.request.use((config) => {\r\n  const token = store.getState().account.user?.token;\r\n  if (token) config.headers.Authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\n\r\naxios.interceptors.response.use(\r\n  async (response) => {\r\n    if (process.env.NODE_ENV === \"development\") await sleep();\r\n    const pagination = response.headers[\"pagination\"];\r\n    if (pagination) {\r\n      response.data = new PaginatedResponse(\r\n        response.data,\r\n        JSON.parse(pagination)\r\n      );\r\n      return response;\r\n    }\r\n    return response;\r\n  },\r\n  (error) => {\r\n    const { data, status } = error.response;\r\n    switch (status) {\r\n      case 400:\r\n        if (data.errors) {\r\n          const modelStateErrors = [];\r\n          for (const key in data.errors) {\r\n            if (data.errors[key]) {\r\n              modelStateErrors.push(data.errors[key]);\r\n            }\r\n          }\r\n          throw modelStateErrors.flat();\r\n        }\r\n        toast.error(data.title);\r\n        break;\r\n      case 401:\r\n        toast.error(data.title);\r\n        break;\r\n      case 403:\r\n        toast.error(\"You are not allowed to do taht\");\r\n        break;\r\n      case 500:\r\n        history.push({\r\n          pathname: \"/server-error\",\r\n          state: { error: data },\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return Promise.reject(error.response);\r\n  }\r\n);\r\n\r\nconst requests = {\r\n  get: (url, params = null) => axios.get(url, { params }).then(responseBody),\r\n  post: (url, body) => axios.post(url, body).then(responseBody),\r\n  put: (url, body) => axios.put(url, body).then(responseBody),\r\n  delete: (url) => axios.delete(url).then(responseBody),\r\n  postForm: (url, data) =>\r\n    axios\r\n      .post(url, data, {\r\n        headers: { \"Content-type\": \"multipart/form-data\" },\r\n      })\r\n      .then(responseBody),\r\n  putForm: (url, data) =>\r\n    axios\r\n      .put(url, data, {\r\n        headers: { \"Content-type\": \"multipart/form-data\" },\r\n      })\r\n      .then(responseBody),\r\n};\r\n\r\nfunction createFormData(item) {\r\n  let formData = new FormData();\r\n  for (const key in item) {\r\n    formData.append(key, item[key]);\r\n  }\r\n  return formData;\r\n}\r\n\r\nconst Admin = {\r\n  createProduct: (product) =>\r\n    requests.postForm(\"products\", createFormData(product)),\r\n  updateProduct: (product) =>\r\n    requests.putForm(\"products\", createFormData(product)),\r\n  deleteProduct: (id) => requests.delete(`products/${id}`),\r\n};\r\n\r\nconst Catalog = {\r\n  list: (params) => requests.get(\"products\", params),\r\n  details: (id) => requests.get(`products/${id}`),\r\n  fetchFilters: () => requests.get(\"products/filters\"),\r\n};\r\n\r\nconst TestErrors = {\r\n  get400Error: () => requests.get(\"buggy/bad-request\"),\r\n  get401Error: () => requests.get(\"buggy/unauthorized\"),\r\n  get404Error: () => requests.get(\"buggy/not-found\"),\r\n  get500Error: () => requests.get(\"buggy/server-error\"),\r\n  getValidationError: () => requests.get(\"buggy/validation-error\"),\r\n};\r\n\r\nconst Basket = {\r\n  get: () => requests.get(\"basket\"),\r\n  addItem: (productId, quantity = 1) =>\r\n    requests.post(`basket?productId=${productId}&quantity=${quantity}`, {}),\r\n  removeItem: (productId, quantity = 1) =>\r\n    requests.delete(`basket?productId=${productId}&quantity=${quantity}`),\r\n};\r\n\r\nconst Account = {\r\n  login: (values) => requests.post(\"account/login\", values),\r\n  register: (values) => requests.post(\"account/register\", values),\r\n  currentUser: () => requests.get(\"account/currentUser\"),\r\n  fetchAddress: () => requests.get(\"account/savedAddress\"),\r\n};\r\n\r\nconst Orders = {\r\n  list: () => requests.get(\"orders\"),\r\n  fetch: (id) => requests.get(`orders/${id}`),\r\n  create: (values) => requests.post(\"orders\", values),\r\n};\r\n\r\nconst Payments = {\r\n  createPaymentIntent: () => requests.post(\"payments\", {}),\r\n};\r\n\r\nconst agent = {\r\n  Catalog,\r\n  TestErrors,\r\n  Basket,\r\n  Account,\r\n  Orders,\r\n  Payments,\r\n  Admin,\r\n};\r\n\r\nexport default agent;\r\n","export function getCookie(key) {\r\n  const b = document.cookie.match(\"(^|;)\\\\s*\" + key + \"\\\\s*=\\\\s*([^;]+)\");\r\n  return b ? b.pop() : \"\";\r\n}\r\n\r\nexport function currencyFormat(amount) {\r\n  return \"$\" + (amount / 100).toFixed(2);\r\n}\r\n","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { getCookie } from \"../../app/util/util\";\r\n\r\nconst initialState = {\r\n  basket: null,\r\n  status: \"idle\",\r\n};\r\n\r\nexport const fetchBasketAsync = createAsyncThunk(\r\n  \"basket/fetchBasketAsync\",\r\n  async (_, thunkAPI) => {\r\n    try {\r\n      return await agent.Basket.get();\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  },\r\n  {\r\n    condition: () => {\r\n      if (!getCookie(\"buyerId\")) return false;\r\n    },\r\n  }\r\n);\r\n\r\nexport const addBasketItemAsync = createAsyncThunk(\r\n  \"basket/addBasketItemAsync\",\r\n  async ({ productId, quantity = 1 }, thunkAPI) => {\r\n    try {\r\n      return await agent.Basket.addItem(productId, quantity);\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const removeBasketItemAsync = createAsyncThunk(\r\n  \"basket/removeBasketItemAsync\",\r\n  async ({ productId, quantity = 1 }, thunkAPI) => {\r\n    try {\r\n      return await agent.Basket.removeItem(productId, quantity);\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const basketSlice = createSlice({\r\n  name: \"basket\",\r\n  initialState,\r\n  reducers: {\r\n    setBasket: (state, action) => {\r\n      state.basket = action.payload;\r\n    },\r\n    clearBasket: (state) => {\r\n      state.basket = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(addBasketItemAsync.pending, (state, action) => {\r\n      state.status = \"pendingAddItem\" + action.meta.arg.productId;\r\n    });\r\n    builder.addCase(removeBasketItemAsync.pending, (state, action) => {\r\n      action.meta.arg.quantity > 1\r\n        ? (state.status = \"pendingRemoveItem\" + action.meta.arg.productId)\r\n        : (state.status = \"pendingRemoveOneItem\" + action.meta.arg.productId);\r\n    });\r\n    builder.addCase(removeBasketItemAsync.fulfilled, (state, action) => {\r\n      const { productId, quantity } = action.meta.arg;\r\n      const itemIndex = state.basket.items.findIndex(\r\n        (i) => i.productId === productId\r\n      );\r\n      if (itemIndex === -1 || itemIndex === undefined) return;\r\n      state.basket.items[itemIndex].quantity -= quantity;\r\n      if (state.basket.items[itemIndex].quantity === 0)\r\n        state.basket.items.splice(itemIndex, 1);\r\n      state.status = \"idle\";\r\n    });\r\n    builder.addCase(removeBasketItemAsync.rejected, (state, action) => {\r\n      state.status = \"idle\";\r\n      console.log(action.payload);\r\n    });\r\n    builder.addMatcher(\r\n      isAnyOf(addBasketItemAsync.fulfilled, fetchBasketAsync.fulfilled),\r\n      (state, action) => {\r\n        state.basket = action.payload;\r\n        state.status = \"idle\";\r\n      }\r\n    );\r\n    builder.addMatcher(\r\n      isAnyOf(addBasketItemAsync.rejected, fetchBasketAsync.rejected),\r\n      (state, action) => {\r\n        state.status = \"idle\";\r\n        console.log(action.payload);\r\n      }\r\n    );\r\n  },\r\n});\r\n\r\nexport const { setBasket, clearBasket } = basketSlice.actions;\r\n","import {\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSlice,\r\n} from \"@reduxjs/toolkit\";\r\nimport agent from \"../../app/api/agent\";\r\n\r\nconst productsAdapter = createEntityAdapter();\r\n\r\nfunction getAxiosParams(productParams) {\r\n  const params = new URLSearchParams();\r\n  params.append(\"pageNumber\", productParams.pageNumber.toString());\r\n  params.append(\"pageSize\", productParams.pageSize.toString());\r\n  params.append(\"orderBy\", productParams.orderBy);\r\n  if (productParams.searchTerm)\r\n    params.append(\"searchTerm\", productParams.searchTerm);\r\n  if (productParams.brands && productParams.brands.length > 0)\r\n    params.append(\"brands\", productParams.brands.toString());\r\n  if (productParams.types && productParams.types.length > 0)\r\n    params.append(\"types\", productParams.types.toString());\r\n  return params;\r\n}\r\n\r\nexport const fetchProductsAsync = createAsyncThunk(\r\n  \"catalog/fetchProductsAsync\",\r\n  async (_, thunkAPI) => {\r\n    const params = getAxiosParams(thunkAPI.getState().catalog.productParams);\r\n    try {\r\n      const response = await agent.Catalog.list(params);\r\n      thunkAPI.dispatch(setMetaData(response.metaData));\r\n      return response.items;\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchProductAsync = createAsyncThunk(\r\n  \"catalog/fetchProductAsync\",\r\n  async (productId, thunkAPI) => {\r\n    try {\r\n      return await agent.Catalog.details(productId);\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchFilters = createAsyncThunk(\r\n  \"catalog/fetchFilters\",\r\n  async (_, thunkAPI) => {\r\n    try {\r\n      return await agent.Catalog.fetchFilters();\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nfunction initParams() {\r\n  return {\r\n    pageNumber: 1,\r\n    pageSize: 6,\r\n    orderBy: \"name\",\r\n  };\r\n}\r\n\r\nexport const catalogSlice = createSlice({\r\n  name: \"catalog\",\r\n  initialState: productsAdapter.getInitialState({\r\n    productsLoaded: false,\r\n    filtersLoaded: false,\r\n    status: \"idle\",\r\n    brands: [],\r\n    types: [],\r\n    productParams: initParams(),\r\n    metaData: null,\r\n  }),\r\n  reducers: {\r\n    setProductParams: (state, action) => {\r\n      state.productsLoaded = false;\r\n      state.productParams = {\r\n        ...state.productParams,\r\n        ...action.payload,\r\n        pageNumber: 1,\r\n      };\r\n    },\r\n    setPageNumber: (state, action) => {\r\n      state.productsLoaded = false;\r\n      state.productParams = {\r\n        ...state.productParams,\r\n        ...action.payload,\r\n      };\r\n    },\r\n    resetProductParams: (state) => {\r\n      state.productParams = initParams();\r\n    },\r\n    setMetaData: (state, action) => {\r\n      state.metaData = action.payload;\r\n    },\r\n    setProduct: (state, action) => {\r\n      productsAdapter.upsertOne(state, action.payload);\r\n      state.productsLoaded = false;\r\n    },\r\n    removeProduct: (state, action) => {\r\n      productsAdapter.removeOne(state, action.payload);\r\n      state.productsLoaded = false;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchProductsAsync.pending, (state) => {\r\n      state.status = \"pendingFetchProducts\";\r\n    });\r\n    builder.addCase(fetchProductsAsync.fulfilled, (state, action) => {\r\n      productsAdapter.setAll(state, action.payload);\r\n      state.status = \"idle\";\r\n      state.productsLoaded = true;\r\n    });\r\n    builder.addCase(fetchProductsAsync.rejected, (state, action) => {\r\n      console.log(action.payload);\r\n      state.status = \"idle\";\r\n    });\r\n    builder.addCase(fetchProductAsync.pending, (state) => {\r\n      state.status = \"pendingFetchProduct\";\r\n    });\r\n    builder.addCase(fetchProductAsync.fulfilled, (state, action) => {\r\n      productsAdapter.upsertOne(state, action.payload);\r\n      state.status = \"idle\";\r\n    });\r\n    builder.addCase(fetchProductAsync.rejected, (state, action) => {\r\n      console.log(action);\r\n      state.status = \"idle\";\r\n    });\r\n    builder.addCase(fetchFilters.pending, (state) => {\r\n      state.status = \"pendingFetchFilters\";\r\n    });\r\n    builder.addCase(fetchFilters.fulfilled, (state, action) => {\r\n      state.brands = action.payload.brands;\r\n      state.types = action.payload.types;\r\n      state.filtersLoaded = true;\r\n    });\r\n    builder.addCase(fetchFilters.rejected, (state, action) => {\r\n      state.status = \"idle\";\r\n      console.log(action.payload);\r\n    });\r\n  },\r\n});\r\n\r\nexport const productSelectors = productsAdapter.getSelectors(\r\n  (state) => state.catalog\r\n);\r\n\r\nexport const {\r\n  setProductParams,\r\n  resetProductParams,\r\n  setMetaData,\r\n  setPageNumber,\r\n  setProduct,\r\n  removeProduct,\r\n} = catalogSlice.actions;\r\n","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { history } from \"../../index\";\r\nimport { toast } from \"react-toastify\";\r\nimport { setBasket } from \"../basket/basketSlice\";\r\n\r\nconst initialState = {\r\n  user: null,\r\n};\r\n\r\nexport const signInUser = createAsyncThunk(\r\n  \"account/signInUser\",\r\n  async (data, thunkAPI) => {\r\n    try {\r\n      const userDto = await agent.Account.login(data);\r\n      const { basket, ...user } = userDto;\r\n      if (basket) thunkAPI.dispatch(setBasket(basket));\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      return user;\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchCurrentUser = createAsyncThunk(\r\n  \"account/fetchCurrentUser\",\r\n  async (_, thunkAPI) => {\r\n    thunkAPI.dispatch(setUser(JSON.parse(localStorage.getItem(\"user\"))));\r\n    try {\r\n      const userDto = await agent.Account.currentUser();\r\n      const { basket, ...user } = userDto;\r\n      if (basket) thunkAPI.dispatch(setBasket(basket));\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      return user;\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  },\r\n  {\r\n    condition: () => {\r\n      if (!localStorage.getItem(\"user\")) return false;\r\n    },\r\n  }\r\n);\r\n\r\nexport const accountSlice = createSlice({\r\n  name: \"account\",\r\n  initialState,\r\n  reducers: {\r\n    signOut: (state) => {\r\n      state.user = null;\r\n      localStorage.removeItem(\"user\");\r\n      history.push(\"/\");\r\n    },\r\n    setUser: (state, action) => {\r\n      let claims = JSON.parse(atob(action.payload.token.split(\".\")[1]));\r\n      let roles =\r\n        claims[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"];\r\n      state.user = {\r\n        ...action.payload,\r\n        roles: typeof roles === \"string\" ? [roles] : roles,\r\n      };\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchCurrentUser.rejected, (state) => {\r\n      state.user = null;\r\n      localStorage.removeItem(\"user\");\r\n      toast.error(\"Session expired - please login again\");\r\n      history.push(\"/login\");\r\n    });\r\n    builder.addMatcher(\r\n      isAnyOf(signInUser.fulfilled, fetchCurrentUser.fulfilled),\r\n      (state, action) => {\r\n        let claims = JSON.parse(atob(action.payload.token.split(\".\")[1]));\r\n        let roles =\r\n          claims[\r\n            \"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"\r\n          ];\r\n        state.user = {\r\n          ...action.payload,\r\n          roles: typeof roles === \"string\" ? [roles] : roles,\r\n        };\r\n      }\r\n    );\r\n    builder.addMatcher(isAnyOf(signInUser.rejected), (state, action) => {\r\n      throw action.payload;\r\n    });\r\n  },\r\n});\r\n\r\nexport const { signOut, setUser } = accountSlice.actions;\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { configureStore } from \"@reduxjs/toolkit\";\r\nimport { counterSlice } from \"../../features/contact/counterSlice\";\r\nimport { basketSlice } from \"../../features/basket/basketSlice\";\r\nimport { catalogSlice } from \"../../features/catalog/catalogSlice\";\r\nimport { accountSlice } from \"../../features/account/accountSlice\";\r\n\r\n// export default function configureStore() {\r\n//   return createStore(counterReducer);\r\n// }\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    counter: counterSlice.reducer,\r\n    basket: basketSlice.reducer,\r\n    catalog: catalogSlice.reducer,\r\n    account: accountSlice.reducer,\r\n  },\r\n});\r\n\r\nexport const useAppDispatch = () => useDispatch();\r\nexport const useAppSelector = useSelector;\r\n","import {\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardMedia,\r\n  Button,\r\n  Typography,\r\n  CardHeader,\r\n  Avatar,\r\n} from \"@mui/material\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { addBasketItemAsync } from \"../basket/basketSlice\";\r\n\r\nexport default function ProductCard({ product }) {\r\n  const { status } = useAppSelector((state) => state.basket);\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <Card sx={{ maxWidth: 345 }}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar sx={{ bgcolor: \"secondary.main\" }}>\r\n            {product.name.charAt(0).toUpperCase()}\r\n          </Avatar>\r\n        }\r\n        title={product.name}\r\n        titleTypographyProps={{\r\n          sx: { fontWeight: \"bold\", color: \"primary.main\" },\r\n        }}\r\n      />\r\n      <CardMedia\r\n        sx={{\r\n          height: 140,\r\n          backgroundSize: \"contain\",\r\n          bgcolor: \"primary.light\",\r\n        }}\r\n        image={product.pictureUrl}\r\n        title={product.name}\r\n      />\r\n      <CardContent>\r\n        <Typography gutterBottom color=\"secondary\" variant=\"h5\">\r\n          $ {(product.price / 100).toFixed(2)}\r\n        </Typography>\r\n        <Typography variant=\"body2\" color=\"text.secondary\">\r\n          {product.brand} / {product.type}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions>\r\n        <LoadingButton\r\n          loading={status === \"pendingAddItem\" + product.id}\r\n          onClick={() => {\r\n            dispatch(addBasketItemAsync({ productId: product.id }));\r\n          }}\r\n          size=\"small\"\r\n        >\r\n          Add to cart\r\n        </LoadingButton>\r\n        <Button component={Link} to={`/catalog/${product.id}`} size=\"small\">\r\n          View\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}\r\n","import {\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  Grid,\r\n  Skeleton,\r\n} from \"@mui/material\";\r\n\r\nexport default function ProductCardSkeleton() {\r\n  return (\r\n    <Grid item xs component={Card}>\r\n      <CardHeader\r\n        avatar={\r\n          <Skeleton\r\n            animation=\"wave\"\r\n            variant=\"circular\"\r\n            width={40}\r\n            height={40}\r\n          />\r\n        }\r\n        title={\r\n          <Skeleton\r\n            animation=\"wave\"\r\n            height={10}\r\n            width=\"80%\"\r\n            style={{ marginBottom: 6 }}\r\n          />\r\n        }\r\n      />\r\n      <Skeleton sx={{ height: 190 }} animation=\"wave\" variant=\"rectangular\" />\r\n      <CardContent>\r\n        <>\r\n          <Skeleton animation=\"wave\" height={10} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation=\"wave\" height={10} width=\"80%\" />\r\n        </>\r\n      </CardContent>\r\n      <CardActions>\r\n        <>\r\n          <Skeleton animation=\"wave\" height={10} width=\"40%\" />\r\n          <Skeleton animation=\"wave\" height={10} width=\"20%\" />\r\n        </>\r\n      </CardActions>\r\n    </Grid>\r\n  );\r\n}\r\n","import { Grid } from \"@material-ui/core\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport ProductCard from \"./ProductCard\";\r\nimport ProductCardSkeleton from \"./ProductCardSkeleton\";\r\n\r\nexport default function ProductList({ products }) {\r\n  const { productsLoaded } = useAppSelector((state) => state.catalog);\r\n  return (\r\n    <Grid container spacing={3}>\r\n      {products.map((product) => (\r\n        <Grid key={product.id} item xs={3}>\r\n          {!productsLoaded ? (\r\n            <ProductCardSkeleton />\r\n          ) : (\r\n            <ProductCard product={product} />\r\n          )}\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n","import TextField from \"@mui/material/TextField\";\r\nimport debounce from \"@mui/utils/debounce\";\r\nimport { useState } from \"react\";\r\nimport { useAppSelector, useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { setProductParams } from \"./catalogSlice\";\r\n\r\nexport default function ProductSearch() {\r\n  const { productParams } = useAppSelector((state) => state.catalog);\r\n  const [searchTerm, setSearchTerm] = useState(productParams.searchTerm);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const debouncedSearch = debounce((event) => {\r\n    dispatch(setProductParams({ searchTerm: event.target.value }));\r\n  }, 1000);\r\n\r\n  return (\r\n    <TextField\r\n      label=\"Search products\"\r\n      variant=\"outlined\"\r\n      fullWidth\r\n      value={searchTerm || \"\"}\r\n      onChange={(event) => {\r\n        setSearchTerm(event.target.value);\r\n        debouncedSearch(event);\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport {\r\n  productSelectors,\r\n  fetchProductsAsync,\r\n  fetchFilters,\r\n} from \"../../features/catalog/catalogSlice\";\r\nimport { useAppSelector, useAppDispatch } from \"../store/configureStore\";\r\n\r\nexport default function useProducts() {\r\n  const products = useAppSelector(productSelectors.selectAll);\r\n  const { productsLoaded, filtersLoaded, brands, types, metaData } =\r\n    useAppSelector((state) => state.catalog);\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!productsLoaded) dispatch(fetchProductsAsync());\r\n  }, [productsLoaded, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (!filtersLoaded) dispatch(fetchFilters());\r\n  }, [filtersLoaded, dispatch]);\r\n\r\n  return {\r\n    products,\r\n    brands,\r\n    types,\r\n    productsLoaded,\r\n    filtersLoaded,\r\n    metaData,\r\n  };\r\n}\r\n","import { Grid, Paper } from \"@material-ui/core\";\r\nimport AppPagination from \"../../app/components/AppPagination\";\r\nimport CheckboxButtons from \"../../app/components/CheckboxButtons\";\r\nimport RadioButtonGroup from \"../../app/components/RadioButtonGroup\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport {\r\n  setProductParams,\r\n  setPageNumber,\r\n} from \"./catalogSlice\";\r\nimport ProductList from \"./ProductList\";\r\nimport ProductSearch from \"./ProductSearch\";\r\nimport useProducts from \"../../app/hooks/useProducts\";\r\n\r\nconst sortOptions = [\r\n  { value: \"name\", label: \"Alphabetical\" },\r\n  { value: \"priceDesc\", label: \"Price - High to low\" },\r\n  { value: \"price\", label: \"Price - Low to hight\" },\r\n];\r\n\r\nexport default function Catalog() {\r\n  const { products, brands, types, filtersLoaded, metaData } = useProducts();\r\n  const { productParams } = useAppSelector((state) => state.catalog);\r\n  const dispatch = useAppDispatch();\r\n\r\n  if (!filtersLoaded) return <LoadingComponent message=\"Loading Products...\" />;\r\n\r\n  return (\r\n    <Grid container columnSpacing={4}>\r\n      <Grid item xs={3}>\r\n        <Paper sx={{ mb: 2 }}>\r\n          <ProductSearch />\r\n        </Paper>\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <RadioButtonGroup\r\n            selectedValue={productParams.orderBy}\r\n            options={sortOptions}\r\n            onChange={(e) =>\r\n              dispatch(setProductParams({ orderBy: e.target.value }))\r\n            }\r\n          />\r\n        </Paper>\r\n\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <CheckboxButtons\r\n            items={brands}\r\n            checked={productParams.brands}\r\n            onChange={(items) => dispatch(setProductParams({ brands: items }))}\r\n          />\r\n        </Paper>\r\n\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <CheckboxButtons\r\n            items={types}\r\n            checked={productParams.types}\r\n            onChange={(items) => dispatch(setProductParams({ types: items }))}\r\n          />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={9}>\r\n        {products && <ProductList products={products} />}\r\n      </Grid>\r\n      <Grid item xs={3} />\r\n      <Grid item xs={9} sx={{ mb: 2 }}>\r\n        {metaData && (\r\n          <AppPagination\r\n            metaData={metaData}\r\n            onPageChange={(page) =>\r\n              dispatch(setPageNumber({ pageNumber: page }))\r\n            }\r\n          />\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { Button, Fade, MenuItem, Menu } from \"@mui/material\";\r\nimport { useAppDispatch, useAppSelector } from \"../store/configureStore\";\r\nimport { signOut } from \"../../features/account/accountSlice\";\r\nimport { clearBasket } from \"../../features/basket/basketSlice\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function SignedInMenu() {\r\n  const dispatch = useAppDispatch();\r\n  const { user } = useAppSelector((state) => state.account);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button color=\"inherit\" onClick={handleClick} sx={{ typography: \"h6\" }}>\r\n        {user?.email}\r\n      </Button>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Fade}\r\n      >\r\n        <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n        <MenuItem component={Link} to=\"/orders\">My orders</MenuItem>\r\n        <MenuItem\r\n          onClick={() => {\r\n            dispatch(signOut());\r\n            dispatch(clearBasket());\r\n          }}\r\n        >\r\n          Logout\r\n        </MenuItem>\r\n      </Menu>\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  List,\r\n  ListItem,\r\n  IconButton,\r\n  Badge,\r\n} from \"@material-ui/core\";\r\nimport { ShoppingCart } from \"@mui/icons-material\";\r\nimport { Box } from \"@material-ui/system\";\r\nimport Switch from \"@mui/material/Switch\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../store/configureStore\";\r\nimport SignedInMenu from \"./SignedInMenu\";\r\n\r\nconst midLinks = [\r\n  { title: \"catalog\", path: \"/catalog\" },\r\n  { title: \"about\", path: \"/about\" },\r\n  { title: \"contact\", path: \"/contact\" },\r\n];\r\n\r\nconst rightLinks = [\r\n  { title: \"login\", path: \"/login\" },\r\n  { title: \"register\", path: \"/register\" },\r\n];\r\n\r\nconst navStyles = {\r\n  color: \"inherit\",\r\n  textDecoration: \"none\",\r\n  typography: \"h6\",\r\n  \"&:hover\": { color: \"grey.500\" },\r\n  \"&.active\": { color: \"text.secondary\" },\r\n};\r\n\r\nexport default function Header({ darkMode, setDarkMode }) {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n  const { user } = useAppSelector((state) => state.account);\r\n  const itemCount = basket\r\n    ? basket.items.reduce((sum, item) => sum + item.quantity, 0)\r\n    : 0;\r\n\r\n  return (\r\n    <AppBar position=\"static\">\r\n      <Toolbar\r\n        sx={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <Typography\r\n            variant=\"h6\"\r\n            component={NavLink}\r\n            exact\r\n            to=\"/\"\r\n            sx={navStyles}\r\n          >\r\n            RE-STORE\r\n          </Typography>\r\n          <Switch onClick={() => setDarkMode(!darkMode)} />\r\n        </Box>\r\n        <List sx={{ display: \"flex\", sm: \"flex\" }}>\r\n          {midLinks.map(({ title, path }) => (\r\n            <ListItem component={NavLink} to={path} key={path} sx={navStyles}>\r\n              {title.toUpperCase()}\r\n            </ListItem>\r\n          ))}\r\n          {user && user.roles?.includes(\"Admin\") && (\r\n            <ListItem component={NavLink} to={\"/inventory\"} sx={navStyles}>\r\n              INVENTORY\r\n            </ListItem>\r\n          )}\r\n        </List>\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <IconButton\r\n            component={Link}\r\n            to=\"/basket\"\r\n            size=\"large\"\r\n            sx={{ color: \"inherit\" }}\r\n          >\r\n            <Badge badgeContent={itemCount} color=\"secondary\">\r\n              <ShoppingCart />\r\n            </Badge>\r\n          </IconButton>\r\n          {user ? (\r\n            <SignedInMenu />\r\n          ) : (\r\n            <List sx={{ display: \"flex\", sm: \"flex\" }}>\r\n              {rightLinks.map(({ title, path }) => (\r\n                <ListItem\r\n                  component={NavLink}\r\n                  to={path}\r\n                  key={path}\r\n                  sx={navStyles}\r\n                >\r\n                  {title.toUpperCase()}\r\n                </ListItem>\r\n              ))}\r\n            </List>\r\n          )}\r\n        </Box>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import { Typography } from \"@material-ui/core\";\r\nimport { Box } from \"@material-ui/system\";\r\nimport Slider from \"react-slick\";\r\n\r\nexport default function HomePage() {\r\n  const settings = {\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n  };\r\n  return (\r\n    <>\r\n      <Slider {...settings}>\r\n        <div>\r\n          <img\r\n            src=\"/images/hero1.jpg\"\r\n            alt=\"hero\"\r\n            style={{ display: \"block\", width: \"100%\", maxHeight: 500 }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <img\r\n            src=\"/images/hero2.jpg\"\r\n            alt=\"hero\"\r\n            style={{ display: \"block\", width: \"100%\", maxHeight: 500 }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <img\r\n            src=\"/images/hero3.jpg\"\r\n            alt=\"hero\"\r\n            style={{ display: \"block\", width: \"100%\", maxHeight: 500 }}\r\n          />\r\n        </div>\r\n      </Slider>\r\n      <Box display=\"flex\" justifyContent=\"center\" sx={{ p: 4 }}>\r\n        <Typography variant=\"h1\">Welcome to the shop !</Typography>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  Container,\r\n  Divider,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function NotFound() {\r\n  return (\r\n    <Container component={Paper} sx={{ height: 400 }}>\r\n      <Typography gutterBottom variant=\"h3\">\r\n        Oops - we could not find what are you looking\r\n      </Typography>\r\n      <Divider />\r\n      <Button fullWidth component={Link} to=\"/catalog\">\r\n        Go Back to Shop\r\n      </Button>\r\n    </Container>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport {\r\n  Grid,\r\n  Typography,\r\n  Divider,\r\n  TableContainer,\r\n  Table,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport NotFound from \"../../app/errors/NotFound\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport {\r\n  addBasketItemAsync,\r\n  removeBasketItemAsync,\r\n} from \"../basket/basketSlice\";\r\nimport { fetchProductAsync, productSelectors } from \"./catalogSlice\";\r\n\r\n// import { useParams } from \"react-router-dom\";\r\n// const { id } = useParams();  // get id from useParams but this is string we want id is a number\r\n\r\nexport default function ProductDetails(props) {\r\n  const { basket, status } = useAppSelector((state) => state.basket);\r\n  const dispatch = useAppDispatch();\r\n  const id = parseInt(props.match.params.id);\r\n  const product = useAppSelector((state) =>\r\n    productSelectors.selectById(state, id)\r\n  );\r\n  const { status: productStatus } = useAppSelector((state) => state.catalog);\r\n  const [quantity, setQuantity] = useState(1);\r\n  // const [submitting, setSubmitting] = useState(false);\r\n  const item = basket\r\n    ? basket.items.find((i) => i.productId === parseInt(id))\r\n    : null;\r\n  useEffect(() => {\r\n    if (item) setQuantity(item.quantity);\r\n    if (!product) dispatch(fetchProductAsync(id));\r\n  }, [id, item, dispatch, product]);\r\n\r\n  function handleInputChange(event) {\r\n    if (event.target.value > 0) {\r\n      setQuantity(parseInt(event.target.value));\r\n    }\r\n  }\r\n\r\n  function handleUpdateCart() {\r\n    // setSubmitting(true);\r\n    if (!item || quantity > item.quantity) {\r\n      const updatedQuantity = item ? quantity - item.quantity : quantity;\r\n      dispatch(\r\n        addBasketItemAsync({ productId: product.id, quantity: updatedQuantity })\r\n      );\r\n    } else {\r\n      const updatedQuantity = item.quantity - quantity;\r\n      dispatch(\r\n        removeBasketItemAsync({\r\n          productId: product.id,\r\n          quantity: updatedQuantity,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  if (productStatus.includes(\"pending\"))\r\n    return <LoadingComponent message=\"Loading Product ...\" />;\r\n\r\n  if (!product) return <NotFound />;\r\n\r\n  return (\r\n    <Grid container spacing={6}>\r\n      <Grid item xs={6}>\r\n        <img\r\n          src={product.pictureUrl}\r\n          alt={product.name}\r\n          style={{ width: \"100%\" }}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        <Typography variant=\"h3\">{product.name}</Typography>\r\n        <Divider sx={{ mb: 2 }} />\r\n        <Typography variant=\"h4\" color=\"secondary\">\r\n          $ {(product.price / 100).toFixed(2)}\r\n        </Typography>\r\n        <TableContainer>\r\n          <Table>\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell>Name</TableCell>\r\n                <TableCell>{product.name}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Description</TableCell>\r\n                <TableCell>{product.description}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Type</TableCell>\r\n                <TableCell>{product.type}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Brand</TableCell>\r\n                <TableCell>{product.brand}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Quantity in Stock</TableCell>\r\n                <TableCell>{product.quantityInStock}</TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={6}>\r\n            <TextField\r\n              onChange={handleInputChange}\r\n              variant=\"outlined\"\r\n              type=\"number\"\r\n              label=\"Quantity in Cart\"\r\n              fullWidth\r\n              value={quantity}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <LoadingButton\r\n              disabled={\r\n                (item && quantity && item.quantity === quantity) ||\r\n                (item === undefined && quantity === 0) ||\r\n                (item === 0 && quantity === 0)\r\n              }\r\n              loading={status.includes(\"pending\")}\r\n              onClick={handleUpdateCart}\r\n              sx={{ height: \"55px\" }}\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              variant=\"contained\"\r\n              fullWidth\r\n            >\r\n              {item ? \"Update Quantity\" : \"Add to Cart\"}\r\n            </LoadingButton>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import {\r\n  Alert,\r\n  AlertTitle,\r\n  Button,\r\n  ButtonGroup,\r\n  Container,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport agent from \"../../app/api/agent\";\r\n\r\nexport default function AboutPage() {\r\n  const [validationErrors, setValidationErrors] = useState([]);\r\n\r\n  function getValidationError() {\r\n    agent.TestErrors.getValidationError()\r\n      .then(() => console.log(\"should not see this\"))\r\n      .catch((error) => setValidationErrors(error));\r\n  }\r\n  return (\r\n    <Container>\r\n      <Typography gutterBottom variant=\"h2\">\r\n        Errors for testing purposes\r\n      </Typography>\r\n      <ButtonGroup fullWidth>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() =>\r\n            agent.TestErrors.get400Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 400 Error\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() =>\r\n            agent.TestErrors.get401Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 401 Error\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() =>\r\n            agent.TestErrors.get404Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 404 Error\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() =>\r\n            agent.TestErrors.get500Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 500 Error\r\n        </Button>\r\n        <Button variant=\"contained\" onClick={getValidationError}>\r\n          Test Validation Error\r\n        </Button>\r\n      </ButtonGroup>\r\n      {validationErrors.length > 0 && (\r\n        <Alert severity=\"error\">\r\n          <AlertTitle>Validation Errors</AlertTitle>\r\n          <List>\r\n            {validationErrors.map((error) => (\r\n              <ListItem key={error}>\r\n                <ListItemText>{error}</ListItemText>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </Alert>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import { Button, ButtonGroup, Typography } from \"@material-ui/core\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { decrement, increment } from \"./counterSlice\";\r\n\r\nexport default function ContactPage() {\r\n  const dispatch = useAppDispatch();\r\n  const { data, title } = useAppSelector((state) => state.counter);\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h2\">{title}</Typography>\r\n      <Typography variant=\"h5\">The data is : {data}</Typography>\r\n      <ButtonGroup>\r\n        <Button\r\n          onClick={() => dispatch(decrement(1))}\r\n          variant=\"contained\"\r\n          color=\"error\"\r\n        >\r\n          Decrement\r\n        </Button>\r\n        <Button\r\n          onClick={() => dispatch(increment(1))}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n        >\r\n          Increment\r\n        </Button>\r\n        <Button\r\n          onClick={() => dispatch(increment(5))}\r\n          variant=\"contained\"\r\n          color=\"success\"\r\n        >\r\n          Increment 5\r\n        </Button>\r\n      </ButtonGroup>\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Divider,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nexport default function ServerError() {\r\n  const history = useHistory();\r\n  const { state } = useLocation();\r\n  return (\r\n    <Container component={Paper}>\r\n      {state.error && state.error ? (\r\n        <>\r\n          <Typography variant=\"h5\" color=\"error\">\r\n            {state.error.title}\r\n          </Typography>\r\n          <Divider />\r\n          <Typography>\r\n            {state.error.detail || \"Internal server error\"}\r\n          </Typography>\r\n        </>\r\n      ) : (\r\n        <Typography variant=\"h5\">Server Error</Typography>\r\n      )}\r\n      <Button onClick={() => history.push(\"/catalog\")}>\r\n        Go back to the store\r\n      </Button>\r\n    </Container>\r\n  );\r\n}\r\n","import { TableContainer, Paper, Table, TableBody, TableRow, TableCell } from \"@mui/material\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport { currencyFormat } from \"../../app/util/util\";\r\n\r\nexport default function BasketSummary({ subtotal }) {\r\n  const { basket } = useAppSelector(state => state.basket);\r\n  if (subtotal === undefined)\r\n    subtotal = basket?.items.reduce((sum, item) => sum + (item.quantity * item.price), 0) ?? 0;\r\n  const deliveryFee = subtotal > 10000 ? 0 : 500;\r\n\r\n  return (\r\n    <>\r\n      <TableContainer component={Paper} variant={'outlined'}>\r\n        <Table>\r\n          <TableBody>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Subtotal</TableCell>\r\n              <TableCell align=\"right\">{currencyFormat(subtotal)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Delivery fee*</TableCell>\r\n              <TableCell align=\"right\">{currencyFormat(deliveryFee)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Total</TableCell>\r\n              <TableCell align=\"right\">{currencyFormat(subtotal + deliveryFee)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>\r\n                <span style={{ fontStyle: 'italic' }}>*Orders over $100 qualify for free delivery</span>\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </>\r\n  )\r\n}","import {\r\n    Paper,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TableRow,\r\n} from \"@material-ui/core\";\r\nimport { Box } from \"@material-ui/system\";\r\nimport { Add, Delete, Remove } from \"@mui/icons-material\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { addBasketItemAsync, removeBasketItemAsync } from \"./basketSlice\";\r\n\r\nexport default function BasketTable({ items, isBasket = true }) {\r\n    const { status } = useAppSelector((state) => state.basket);\r\n    const dispatch = useAppDispatch();\r\n    return (\r\n        <TableContainer component={Paper}>\r\n            <Table sx={{ minWidth: 650 }}>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Product</TableCell>\r\n                        <TableCell align=\"right\">Price</TableCell>\r\n                        <TableCell align=\"center\">Quantity</TableCell>\r\n                        <TableCell align=\"right\">Subtotal</TableCell>\r\n                        {isBasket &&\r\n                            <TableCell align=\"right\"></TableCell>\r\n                        }\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {items.map((item) => (\r\n                        <TableRow\r\n                            key={item.productId}\r\n                            sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\r\n                        >\r\n                            <TableCell component=\"th\" scope=\"row\">\r\n                                <Box display=\"felx\" alignItems=\"center\">\r\n                                    <img\r\n                                        src={item.pictureUrl}\r\n                                        alt={item.name}\r\n                                        style={{ height: 50, marginRight: 20 }}\r\n                                    />\r\n                                    <span>{item.name}</span>\r\n                                </Box>\r\n                            </TableCell>\r\n                            <TableCell align=\"right\">\r\n                                $ {(item.price / 100).toFixed(2)}\r\n                            </TableCell>\r\n                            <TableCell align=\"center\">\r\n                                {isBasket &&\r\n                                    <LoadingButton\r\n                                        loading={status === \"pendingRemoveOneItem\" + item.productId}\r\n                                        onClick={() =>\r\n                                            dispatch(\r\n                                                removeBasketItemAsync({\r\n                                                    productId: item.productId,\r\n                                                    quantity: 1,\r\n                                                })\r\n                                            )\r\n                                        }\r\n                                        color=\"error\"\r\n                                    >\r\n                                        <Remove />\r\n                                    </LoadingButton>}\r\n                                {item.quantity}\r\n                                {isBasket &&\r\n                                    <LoadingButton\r\n                                        loading={status === \"pendingAddItem\" + item.productId}\r\n                                        onClick={() =>\r\n                                            dispatch(\r\n                                                addBasketItemAsync({ productId: item.productId })\r\n                                            )\r\n                                        }\r\n                                        color=\"success\"\r\n                                    >\r\n                                        <Add />\r\n                                    </LoadingButton>}\r\n                            </TableCell>\r\n                            <TableCell align=\"right\">\r\n                                $ {((item.price / 100) * item.quantity).toFixed(2)}\r\n                            </TableCell>\r\n                            {isBasket &&\r\n                                <TableCell align=\"right\">\r\n                                    <LoadingButton\r\n                                        loading={status === \"pendingRemoveItem\" + item.productId}\r\n                                        onClick={() =>\r\n                                            dispatch(\r\n                                                removeBasketItemAsync({\r\n                                                    productId: item.productId,\r\n                                                    quantity: item.quantity,\r\n                                                })\r\n                                            )\r\n                                        }\r\n                                        color=\"error\"\r\n                                    >\r\n                                        <Delete />\r\n                                    </LoadingButton>\r\n                                </TableCell>}\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n}\r\n","import {\r\n  Typography,\r\n  Grid,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport BasketSummary from \"./BasketSummary\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport BasketTable from \"./BasketTable\";\r\n\r\nexport default function BasketPage() {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n\r\n  if (!basket || (basket && basket.items.length === 0))\r\n    return <Typography variant=\"h3\">Your basket is empty</Typography>;\r\n\r\n  return (\r\n    <>\r\n      <BasketTable items={basket.items} />\r\n      <Grid\r\n        container\r\n        spacing={0}\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        style={{ paddingBottom: \"200px\" }}\r\n      >\r\n        <Grid item xs={6}>\r\n          <BasketSummary basket={basket} />\r\n          <Button\r\n            component={Link}\r\n            to=\"/checkout\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            fullWidth\r\n          >\r\n            Checkout\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import Avatar from \"@mui/material/Avatar\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Box from \"@mui/material/Box\";\r\nimport LockOutlinedIcon from \"@mui/icons-material/LockOutlined\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Container from \"@mui/material/Container\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { Paper } from \"@mui/material\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { signInUser } from \"./accountSlice\";\r\n\r\nexport default function Login() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const dispatch = useAppDispatch();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { isSubmitting, errors, isValid },\r\n  } = useForm({\r\n    mode: \"all\",\r\n  });\r\n\r\n  async function submitForm(data) {\r\n    try {\r\n      await dispatch(signInUser(data));\r\n      history.push(location.state?.from?.pathname || \"/catalog\");\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container\r\n      component={Paper}\r\n      maxWidth=\"sm\"\r\n      sx={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        p: 4,\r\n      }}\r\n    >\r\n      <Avatar sx={{ m: 1, bgcolor: \"secondary.main\" }}>\r\n        <LockOutlinedIcon />\r\n      </Avatar>\r\n      <Typography component=\"h1\" variant=\"h5\">\r\n        Sign in\r\n      </Typography>\r\n      <Box\r\n        component=\"form\"\r\n        onSubmit={handleSubmit(submitForm)}\r\n        noValidate\r\n        sx={{ mt: 1 }}\r\n      >\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Username\"\r\n          autoFocus\r\n          {...register(\"username\", { required: \"Username is required\" })}\r\n          error={!!errors.username}\r\n          helperText={errors?.username?.message}\r\n        />\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          {...register(\"password\", { required: \"Password is required\" })}\r\n          error={!!errors.password}\r\n          helperText={errors?.password?.message}\r\n        />\r\n        <LoadingButton\r\n          loading={isSubmitting}\r\n          disabled={!isValid}\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Sign In\r\n        </LoadingButton>\r\n        <Grid container>\r\n          <Grid item>\r\n            <Link to=\"/register\">{\"Don't have an account? Sign Up\"}</Link>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import Avatar from \"@mui/material/Avatar\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Box from \"@mui/material/Box\";\r\nimport LockOutlinedIcon from \"@mui/icons-material/LockOutlined\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Container from \"@mui/material/Container\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { Paper } from \"@mui/material\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport default function Register() {\r\n  const history = useHistory();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setError,\r\n    formState: { isSubmitting, errors, isValid },\r\n  } = useForm({\r\n    mode: \"all\",\r\n  });\r\n\r\n  function handleApiErrors(errors) {\r\n    if (errors) {\r\n      errors.forEach((error) => {\r\n        if (error.includes(\"Password\")) {\r\n          setError(\"password\", { message: error });\r\n        } else if (error.includes(\"Email\")) {\r\n          setError(\"email\", { message: error });\r\n        } else if (error.includes(\"Username\")) {\r\n          setError(\"username\", { message: error });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container\r\n      component={Paper}\r\n      maxWidth=\"sm\"\r\n      sx={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        p: 4,\r\n      }}\r\n    >\r\n      <Avatar sx={{ m: 1, bgcolor: \"secondary.main\" }}>\r\n        <LockOutlinedIcon />\r\n      </Avatar>\r\n      <Typography component=\"h1\" variant=\"h5\">\r\n        Register\r\n      </Typography>\r\n      <Box\r\n        component=\"form\"\r\n        onSubmit={handleSubmit((data) =>\r\n          agent.Account.register(data)\r\n            .then(() => {\r\n              toast.success(\"Registration successful - you can now login .\");\r\n              history.push(\"/login\");\r\n            })\r\n            .catch((error) => handleApiErrors(error))\r\n        )}\r\n        noValidate\r\n        sx={{ mt: 1 }}\r\n      >\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Username\"\r\n          autoFocus\r\n          {...register(\"username\", { required: \"Username is required\" })}\r\n          error={!!errors.username}\r\n          helperText={errors?.username?.message}\r\n        />\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Email Address\"\r\n          {...register(\"email\", {\r\n            required: \"Email is required\",\r\n            pattern: {\r\n              value: /^\\w+[\\w-.]*@\\w+((-\\w+)|(\\w*)).[a-z]{2,3}$/,\r\n              message: \"Not a valid email address\",\r\n            },\r\n          })}\r\n          error={!!errors.email}\r\n          helperText={errors?.email?.message}\r\n        />\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          {...register(\"password\", {\r\n            required: \"Password is required\",\r\n            pattern: {\r\n              value:\r\n                /(?=^.{6,10}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*\\s).*$/,\r\n              message: \"Password is not complex enough\",\r\n            },\r\n          })}\r\n          error={!!errors.password}\r\n          helperText={errors?.password?.message}\r\n        />\r\n        <LoadingButton\r\n          loading={isSubmitting}\r\n          disabled={!isValid}\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Register\r\n        </LoadingButton>\r\n        <Grid container>\r\n          <Grid item>\r\n            <Link to=\"/login\">{\"Already have an account? Sign In\"}</Link>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { Route, Redirect } from \"react-router\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useAppSelector } from \"../store/configureStore\";\r\n\r\nexport default function PrivateRoute({ component: Component, roles, ...rest }) {\r\n  const { user } = useAppSelector((state) => state.account);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (!user) {\r\n          return (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/login\",\r\n                state: { from: props.location },\r\n              }}\r\n            />\r\n          );\r\n        }\r\n\r\n        if (roles && !roles?.some((r) => user.roles?.includes(r))) {\r\n          toast.error(\"Not authorized to access this area\");\r\n          return (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/catalog\",\r\n              }}\r\n            />\r\n          );\r\n        }\r\n        return <Component {...props} />;\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import { Button, Grid, Typography } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport BasketSummary from \"../basket/BasketSummary\";\r\nimport BasketTable from \"../basket/BasketTable\";\r\n\r\n\r\n\r\nexport default function OrderDetailed({ order, setSelectedOrder }) {\r\n    const subtotal = order.orderItems.reduce((sum, item) => sum + (item.quantity * item.price), 0) ?? 0;\r\n    return (\r\n        <>\r\n            <Box display='flex' justifyContent='space-between'>\r\n                <Typography sx={{ p: 2 }} gutterBottom variant='h4'>Order# {order.id} - {order.orderStatus}</Typography>\r\n                <Button onClick={() => setSelectedOrder(0)} sx={{ m: 2 }} size='large' variant='contained'>Back to orders</Button>\r\n            </Box>\r\n            <BasketTable items={order.orderItems} isBasket={false} />\r\n            <Grid container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                style={{ paddingBottom: \"200px\" }}>\r\n                <Grid item xs={6}>\r\n                    <BasketSummary subtotal={subtotal} />\r\n                </Grid>\r\n            </Grid>\r\n        </>\r\n    )\r\n}","import { TableContainer, Paper, Table, TableHead, TableRow, TableCell, TableBody, Button } from '@mui/material'\r\nimport { useEffect, useState } from 'react'\r\nimport agent from '../../app/api/agent'\r\nimport LoadingComponent from '../../app/layout/LoadingComponent';\r\nimport { currencyFormat } from '../../app/util/util';\r\nimport OrderDetailed from './OrderDetailed';\r\n\r\nexport default function Orders() {\r\n    const [orders, setOrders] = useState();\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedOrderNumber, setSelectedOrderNumber] = useState(0);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        agent.Orders.list()\r\n            .then(orders => setOrders(orders))\r\n            .catch(error => console.log(error))\r\n            .finally(() => setLoading(false))\r\n    }, [])\r\n\r\n    if (loading) return <LoadingComponent message=\"Loading orders...\" />\r\n\r\n    if (selectedOrderNumber > 0) return (\r\n        <OrderDetailed\r\n            order={orders?.find(o => o.id === selectedOrderNumber)}\r\n            setSelectedOrder={setSelectedOrderNumber} />\r\n    )\r\n\r\n\r\n    return (\r\n        <TableContainer component={Paper}>\r\n            <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Order number</TableCell>\r\n                        <TableCell align=\"right\">Total</TableCell>\r\n                        <TableCell align=\"right\">Order Date</TableCell>\r\n                        <TableCell align=\"right\">Order Status</TableCell>\r\n                        <TableCell align=\"right\"></TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {orders?.map((order) => (\r\n                        <TableRow key={order.id}\r\n                            sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n                            <TableCell component=\"th\" scope=\"row\">\r\n                                {order.id}\r\n                            </TableCell>\r\n                            <TableCell align=\"right\">{currencyFormat(order.total)}</TableCell>\r\n                            <TableCell align=\"right\">{order.orderDate.split('T')[0]}</TableCell>\r\n                            <TableCell align=\"right\">{order.orderStatus}</TableCell>\r\n                            <TableCell align=\"right\">\r\n                                <Button onClick={() => setSelectedOrderNumber(order.id)}>View</Button>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n}\r\n","import { Checkbox, FormControlLabel } from \"@mui/material\"\r\nimport { useController } from \"react-hook-form\"\r\n\r\nexport default function AppCheckbox(props) {\r\n    const { field } = useController({ ...props, defaultValue: false })\r\n    return (\r\n        <FormControlLabel\r\n            control={\r\n                <Checkbox\r\n                    {...field}\r\n                    checked={field.value}\r\n                    color=\"secondary\"\r\n                    disabled={props.disabled}\r\n                />\r\n            }\r\n            label={props.label}\r\n        >\r\n\r\n        </FormControlLabel>\r\n    )\r\n}\r\n","import { TextField } from \"@mui/material\";\r\nimport { useController } from \"react-hook-form\";\r\n\r\nexport default function AppTextInput(props) {\r\n  const { fieldState, field } = useController({ ...props, defaultValue: \"\" });\r\n  return (\r\n    <TextField\r\n      {...props}\r\n      {...field}\r\n      multiline={props.multiline}\r\n      rows={props.rows}\r\n      type={props.type}\r\n      fullWidth\r\n      variant=\"outlined\"\r\n      error={!!fieldState.error}\r\n      helperText={fieldState.error?.message}\r\n    />\r\n  );\r\n}\r\n","import Grid from \"@mui/material/Grid\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport AppCheckbox from \"../../app/components/AppCheckbox\";\r\nimport AppTextInput from \"../../app/components/AppTextInput\";\r\n\r\nexport default function AddressForm() {\r\n  const { control, formState } = useFormContext();\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Shipping address\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} sm={12}>\r\n          <AppTextInput control={control} name=\"fullName\" label=\"Full name\" />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <AppTextInput control={control} name=\"address1\" label=\"Address 1\" />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <AppTextInput control={control} name=\"address2\" label=\"Address 2\" />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name=\"city\" label=\"City\" />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name=\"state\" label=\"State\" />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name=\"zip\" label=\"Zipcode\" />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name=\"country\" label=\"Country\" />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <AppCheckbox\r\n            disabled={!formState.isDirty}\r\n            name=\"saveAddress\" label=\"Save this as the default address\"\r\n            control={control}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import { forwardRef, useImperativeHandle, useRef } from \"react\";\r\n\r\nexport const StripeInput = forwardRef(function StripeInput(\r\n  { component: Component, ...props },\r\n  ref\r\n) {\r\n  const elementRef = useRef();\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    focus: () => elementRef.current.focus,\r\n  }));\r\n\r\n  return (\r\n    <Component\r\n      onReady={(element) => (elementRef.current = element)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n","import Typography from \"@mui/material/Typography\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport AppTextInput from \"../../app/components/AppTextInput\";\r\nimport {\r\n  CardCvcElement,\r\n  CardExpiryElement,\r\n  CardNumberElement,\r\n} from \"@stripe/react-stripe-js\";\r\nimport { StripeInput } from \"./StripeInput\";\r\n\r\nexport default function PaymentForm({ cardState, onCardInputChange }) {\r\n  const { control } = useFormContext();\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Payment method\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={6}>\r\n          <AppTextInput\r\n            name=\"nameOnCard\"\r\n            label=\"Name on card\"\r\n            control={control}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            onChange={onCardInputChange}\r\n            error={!!cardState.elementError.cardNumber}\r\n            helperText={cardState.elementError.cardNumber}\r\n            id=\"cardNumber\"\r\n            label=\"Card number\"\r\n            fullWidth\r\n            autoComplete=\"cc-number\"\r\n            variant=\"outlined\"\r\n            InputLabelProps={{ shrink: true }}\r\n            InputProps={{\r\n              inputComponent: StripeInput,\r\n              inputProps: {\r\n                component: CardNumberElement,\r\n              },\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            onChange={onCardInputChange}\r\n            error={!!cardState.elementError.cardExpiry}\r\n            helperText={cardState.elementError.cardExpiry}\r\n            id=\"expDate\"\r\n            label=\"Expiry date\"\r\n            fullWidth\r\n            autoComplete=\"cc-exp\"\r\n            variant=\"outlined\"\r\n            InputLabelProps={{ shrink: true }}\r\n            InputProps={{\r\n              inputComponent: StripeInput,\r\n              inputProps: {\r\n                component: CardExpiryElement,\r\n              },\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            onChange={onCardInputChange}\r\n            error={!!cardState.elementError.cardCvc}\r\n            helperText={cardState.elementError.cardCvc}\r\n            id=\"cvv\"\r\n            label=\"CVV\"\r\n            fullWidth\r\n            autoComplete=\"cc-csc\"\r\n            variant=\"outlined\"\r\n            InputLabelProps={{ shrink: true }}\r\n            InputProps={{\r\n              inputComponent: StripeInput,\r\n              inputProps: {\r\n                component: CardCvcElement,\r\n              },\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import { Grid } from '@material-ui/core';\r\nimport Typography from '@mui/material/Typography';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport BasketSummary from '../basket/BasketSummary';\r\nimport BasketTable from '../basket/BasketTable';\r\n\r\nexport default function Review() {\r\n  const { basket } = useAppSelector(state => state.basket);\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Order summary\r\n      </Typography>\r\n      {basket &&\r\n        <BasketTable items={basket.items} isBasket={false} />\r\n      }\r\n      <Grid\r\n        container\r\n        spacing={0}\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        style={{ paddingBottom: \"200px\" }}\r\n      >\r\n        <Grid item xs={6}\r\n        >\r\n          <BasketSummary basket={basket} />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}","import * as yup from 'yup';\r\n\r\n\r\nexport const validationSchema = [\r\n    yup.object({\r\n        fullName: yup.string().required(\"Full name is required\"),\r\n        address1: yup.string().required(\"Address line 1 is required\"),\r\n        address2: yup.string().required(),\r\n        city: yup.string().required(),\r\n        state: yup.string().required(),\r\n        zip: yup.string().required(),\r\n        country: yup.string().required(),\r\n    }),\r\n    yup.object(),\r\n    yup.object({\r\n        nameOnCard: yup.string().required()\r\n    })\r\n]","import {\r\n  Box,\r\n  Button,\r\n  Paper,\r\n  Step,\r\n  StepLabel,\r\n  Stepper,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport AddressForm from \"./AddressForm\";\r\nimport PaymentForm from \"./PaymentForm\";\r\nimport Review from \"./Review\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { validationSchema } from \"./checkoutValidation\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { clearBasket } from \"../basket/basketSlice\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport {\r\n  CardNumberElement,\r\n  useElements,\r\n  useStripe,\r\n} from \"@stripe/react-stripe-js\";\r\n\r\nconst steps = [\"Shipping address\", \"Review your order\", \"Payment details\"];\r\n\r\nexport default function CheckoutPage() {\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [orderNumber, setOrderNumber] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n  const [cardState, setCardState] = useState({ elementError: {} });\r\n  const [cardComplete, setCardComplete] = useState({\r\n    cardNumber: false,\r\n    cardExpiry: false,\r\n    cardCvc: false,\r\n  });\r\n  const [paymentMessage, setPaymentMessage] = useState(\"\");\r\n  const [paymentSucceeded, setPaymentSucceeded] = useState(false);\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  function onCardInputChange(event) {\r\n    setCardState({\r\n      ...cardState,\r\n      elementError: {\r\n        ...cardState.elementError,\r\n        [event.elementType]: event.error?.message,\r\n      },\r\n    });\r\n    setCardComplete({ ...cardComplete, [event.elementType]: event.complete });\r\n  }\r\n\r\n  function getStepContent(step) {\r\n    switch (step) {\r\n      case 0:\r\n        return <AddressForm />;\r\n      case 1:\r\n        return <Review />;\r\n      case 2:\r\n        return (\r\n          <PaymentForm\r\n            cardState={cardState}\r\n            onCardInputChange={onCardInputChange}\r\n          />\r\n        );\r\n      default:\r\n        throw new Error(\"Unknown step\");\r\n    }\r\n  }\r\n\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n\r\n  const methods = useForm({\r\n    mode: \"all\",\r\n    resolver: yupResolver(currentValidationSchema),\r\n  });\r\n\r\n  useEffect(() => {\r\n    agent.Account.fetchAddress().then((response) => {\r\n      if (response) {\r\n        methods.reset({\r\n          ...methods.getValues(),\r\n          ...response,\r\n          saveAddress: false,\r\n        });\r\n      }\r\n    });\r\n  }, [methods]);\r\n\r\n  async function submitOrder(data) {\r\n    setLoading(true);\r\n    const { nameOnCard, saveAddress, ...shippingAddress } = data;\r\n    if (!stripe || !elements) return; // stripe is not ready\r\n\r\n    try {\r\n      const cardElement = elements.getElement(CardNumberElement);\r\n      const paymentResult = await stripe.confirmCardPayment(\r\n        basket?.clientSecret,\r\n        {\r\n          payment_method: {\r\n            card: cardElement,\r\n            billing_details: {\r\n              name: nameOnCard,\r\n            },\r\n          },\r\n        }\r\n      );\r\n      console.log(paymentResult);\r\n      if (paymentResult.paymentIntent?.status === \"succeeded\") {\r\n        const orderNumber = await agent.Orders.create({\r\n          saveAddress,\r\n          shippingAddress,\r\n        });\r\n        setOrderNumber(orderNumber);\r\n        setPaymentSucceeded(true);\r\n        setPaymentMessage(\"Thank you - we have received your payment.\");\r\n        setActiveStep(activeStep + 1);\r\n        dispatch(clearBasket());\r\n        setLoading(false);\r\n      } else {\r\n        setPaymentMessage(paymentResult.error?.message);\r\n        setPaymentSucceeded(false);\r\n        setLoading(false);\r\n        setActiveStep(activeStep + 1);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  const handleNext = async (data) => {\r\n    if (activeStep === steps.length - 1) {\r\n      await submitOrder(data);\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep(activeStep - 1);\r\n  };\r\n\r\n  function submitDisabled() {\r\n    if (activeStep === steps.length - 1) {\r\n      return (\r\n        !cardComplete.cardCvc ||\r\n        !cardComplete.cardExpiry ||\r\n        !cardComplete.cardNumber ||\r\n        !methods.formState.isValid\r\n      );\r\n    } else {\r\n      return !methods.formState.isValid;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <FormProvider {...methods}>\r\n      <Paper\r\n        variant=\"outlined\"\r\n        sx={{ my: { xs: 3, md: 6 }, p: { xs: 2, md: 3 } }}\r\n      >\r\n        <Typography component=\"h1\" variant=\"h4\" align=\"center\">\r\n          Checkout\r\n        </Typography>\r\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\r\n          {steps.map((label) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n        <>\r\n          {activeStep === steps.length ? (\r\n            <>\r\n              <Typography variant=\"h5\" gutterBottom>\r\n                {paymentMessage}\r\n              </Typography>\r\n              {paymentSucceeded ? (\r\n                <Typography variant=\"subtitle1\">\r\n                  Your order number is #{orderNumber} . We have not emailed your\r\n                  order confirmation, and will not send you an update when your\r\n                  order has shipped as this is a fake store!\r\n                </Typography>\r\n              ) : (\r\n                <Button variant=\"contained\" onClick={handleBack}>\r\n                  Go back and try again\r\n                </Button>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <form onSubmit={methods.handleSubmit(handleNext)}>\r\n              {getStepContent(activeStep)}\r\n              <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                {activeStep !== 0 && (\r\n                  <Button onClick={handleBack} sx={{ mt: 3, ml: 1 }}>\r\n                    Back\r\n                  </Button>\r\n                )}\r\n                <LoadingButton\r\n                  loading={loading}\r\n                  disabled={submitDisabled()}\r\n                  variant=\"contained\"\r\n                  type=\"submit\"\r\n                  sx={{ mt: 3, ml: 1 }}\r\n                >\r\n                  {activeStep === steps.length - 1 ? \"Place order\" : \"Next\"}\r\n                </LoadingButton>\r\n              </Box>\r\n            </form>\r\n          )}\r\n        </>\r\n      </Paper>\r\n    </FormProvider>\r\n  );\r\n}\r\n","import { Elements } from \"@stripe/react-stripe-js\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport CheckoutPage from \"./CheckoutPage\";\r\nimport { useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { useEffect, useState } from \"react\";\r\nimport agent from \"../../app/api/agent\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { setBasket } from \"../basket/basketSlice\";\r\n\r\nconst stripePromise = loadStripe(\r\n  \"pk_test_51K3bLsHVHgrFgewPOuvZhdcjnnMPtHBx4ISG1P6mvaDYhCZ3GQr1GEFTqxsDYvGuPZqDp788di0BOGoMsUsH6f2B00Uf0j6gPV\"\r\n);\r\n\r\nexport default function CheckoutWrapper() {\r\n  const dispatch = useAppDispatch();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    agent.Payments.createPaymentIntent()\r\n      .then((basket) => dispatch(setBasket(basket)))\r\n      .catch((error) => console.log(error))\r\n      .finally(() => setLoading(false));\r\n  }, [dispatch]);\r\n\r\n  if (loading) return <LoadingComponent message=\"Loading checkout...\" />;\r\n\r\n  return (\r\n    <Elements stripe={stripePromise}>\r\n      <CheckoutPage />\r\n    </Elements>\r\n  );\r\n}\r\n","import * as yup from \"yup\";\r\n\r\nexport const validationSchema = yup.object({\r\n  name: yup.string().required(),\r\n  brand: yup.string().required(),\r\n  type: yup.string().required(),\r\n  price: yup.number().required().moreThan(100),\r\n  quantityInStock: yup.number().required().min(0),\r\n  description: yup.string().required(),\r\n  file: yup\r\n    .mixed()\r\n    .required()\r\n    .when(\"pictureUrl\", {\r\n      is: (value) => !value,\r\n      then: yup.mixed().required(\"Please provide an image\"),\r\n    }),\r\n});\r\n","import {\r\n  FormControl,\r\n  FormHelperText,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n} from \"@material-ui/core\";\r\nimport { useController } from \"react-hook-form\";\r\n\r\nexport default function AppSelectList(props) {\r\n  const { fieldState, field } = useController({ ...props, defaultValue: \"\" });\r\n  return (\r\n    <FormControl fullWidth error={!!fieldState.error}>\r\n      <InputLabel>{props.label}</InputLabel>\r\n      <Select value={field.value} label={props.label} onChange={field.onChange}>\r\n        {props.items.map((item, index) => (\r\n          <MenuItem key={index} value={item}>\r\n            {item}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n      <FormHelperText>{fieldState.error?.message}</FormHelperText>\r\n    </FormControl>\r\n  );\r\n}\r\n","import { UploadFile } from \"@mui/icons-material\";\r\nimport { FormControl, FormHelperText, Typography } from \"@mui/material\";\r\nimport { useCallback } from \"react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { useController } from \"react-hook-form\";\r\n\r\nexport default function AppDropzone(props) {\r\n  const { fieldState, field } = useController({ ...props, defaultValue: null });\r\n\r\n  const dzStyles = {\r\n    display: \"flex\",\r\n    border: \"dashed 3px #eee\",\r\n    borderColor: \"#eee\",\r\n    borderRadius: \"5px\",\r\n    paddingTop: \"30px\",\r\n    alignItems: \"center\",\r\n    height: 200,\r\n    width: 500,\r\n  };\r\n\r\n  const dzActive = {\r\n    borderColor: \"green\",\r\n  };\r\n\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      acceptedFiles[0] = Object.assign(acceptedFiles[0], {\r\n        preview: URL.createObjectURL(acceptedFiles[0]),\r\n      });\r\n      field.onChange(acceptedFiles[0]);\r\n    },\r\n    [field]\r\n  );\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\r\n\r\n  return (\r\n    <div {...getRootProps()}>\r\n      <FormControl\r\n        error={!!fieldState.error}\r\n        style={isDragActive ? { ...dzStyles, ...dzActive } : dzStyles}\r\n      >\r\n        <input {...getInputProps()} />\r\n        <UploadFile sx={{ fontSize: \"100px\" }} />\r\n        <Typography variant=\"h4\">Drop image here</Typography>\r\n        <FormHelperText>{fieldState.error?.message}</FormHelperText>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}\r\n","import { Typography, Grid, Paper, Box, Button } from \"@mui/material\";\r\nimport { useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport AppTextInput from \"../../app/components/AppTextInput\";\r\nimport useProducts from \"../../app/hooks/useProducts\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { validationSchema } from \"./productValidation\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { setProduct } from \"../catalog/catalogSlice\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport AppSelectList from \"../../app/components/AppSelectList\";\r\nimport AppDropzone from \"../../app/components/AppDropzone\";\r\n\r\nexport default function ProductForm({ product, cancelEdit }) {\r\n  const {\r\n    control,\r\n    reset,\r\n    handleSubmit,\r\n    watch,\r\n    formState: { isDirty, isSubmitting },\r\n  } = useForm({\r\n    mode: \"all\",\r\n    resolver: yupResolver(validationSchema),\r\n  });\r\n  const { brands, types } = useProducts();\r\n  const watchFile = watch(\"file\", null);\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    if (product && !watchFile && !isDirty) reset(product);\r\n    return () => {\r\n      if (watchFile) URL.revokeObjectURL(watchFile.preview);\r\n    };\r\n  }, [product, reset, watchFile, isDirty]);\r\n\r\n  async function handleSubmitData(data) {\r\n    try {\r\n      let response;\r\n      if (product) {\r\n        response = await agent.Admin.updateProduct(data);\r\n      } else {\r\n        response = await agent.Admin.createProduct(data);\r\n      }\r\n      dispatch(setProduct(response));\r\n      cancelEdit();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box component={Paper} sx={{ p: 4 }}>\r\n      <Typography variant=\"h4\" gutterBottom sx={{ mb: 4 }}>\r\n        Product Details\r\n      </Typography>\r\n      <form onSubmit={handleSubmit(handleSubmitData)}>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} sm={12}>\r\n            <AppTextInput control={control} name=\"name\" label=\"Product name\" />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppSelectList\r\n              items={brands}\r\n              control={control}\r\n              name=\"brand\"\r\n              label=\"Brand\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppSelectList\r\n              items={types}\r\n              control={control}\r\n              name=\"type\"\r\n              label=\"Type\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppTextInput\r\n              type=\"number\"\r\n              control={control}\r\n              name=\"price\"\r\n              label=\"Price\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppTextInput\r\n              type=\"number\"\r\n              control={control}\r\n              name=\"quantityInStock\"\r\n              label=\"Quantity in Stock\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <AppTextInput\r\n              multiline={true}\r\n              rows={4}\r\n              control={control}\r\n              name=\"description\"\r\n              label=\"Description\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n            >\r\n              <AppDropzone control={control} name=\"file\" />\r\n              {watchFile ? (\r\n                <img\r\n                  src={watchFile.preview}\r\n                  alt=\"preview\"\r\n                  style={{ maxHeight: 200 }}\r\n                />\r\n              ) : (\r\n                <img\r\n                  src={product?.pictureUrl}\r\n                  alt={product?.name}\r\n                  style={{ maxHeight: 200 }}\r\n                />\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" sx={{ mt: 3 }}>\r\n          <Button onClick={cancelEdit} variant=\"contained\" color=\"inherit\">\r\n            Cancel\r\n          </Button>\r\n          <LoadingButton\r\n            loading={isSubmitting}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"success\"\r\n          >\r\n            Submit\r\n          </LoadingButton>\r\n        </Box>\r\n      </form>\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n  Typography,\r\n  Button,\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Box,\r\n  DialogActions,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogContentText,\r\n} from \"@mui/material\";\r\nimport { Edit, Delete } from \"@mui/icons-material\";\r\nimport { currencyFormat } from \"../../app/util/util\";\r\nimport useProducts from \"../../app/hooks/useProducts\";\r\nimport AppPagination from \"../../app/components/AppPagination\";\r\nimport { useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { setPageNumber, removeProduct } from \"../catalog/catalogSlice\";\r\nimport { useState } from \"react\";\r\nimport ProductForm from \"./ProductForm\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\n\r\nexport default function Inventory() {\r\n  const { products, metaData } = useProducts();\r\n  const dispatch = useAppDispatch();\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [selectedProduct, setSelectedProduct] = useState(undefined);\r\n  const [loading, setLoading] = useState(false);\r\n  const [target, setTarget] = useState(0);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = (id) => {\r\n    setOpen(true);\r\n    setTarget(id);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  function handleSelectProduct(product) {\r\n    setSelectedProduct(product);\r\n    setEditMode(true);\r\n  }\r\n\r\n  function handleDeleteProduct() {\r\n    setOpen(false);\r\n    setLoading(true);\r\n    agent.Admin.deleteProduct(target)\r\n      .then(() => dispatch(removeProduct(target)))\r\n      .catch((error) => console.log(error))\r\n      .finally(() => setLoading(false));\r\n  }\r\n\r\n  function cancelEdit() {\r\n    if (selectedProduct) setSelectedProduct(undefined);\r\n    setEditMode(false);\r\n  }\r\n\r\n  if (editMode)\r\n    return <ProductForm product={selectedProduct} cancelEdit={cancelEdit} />;\r\n\r\n  return (\r\n    <>\r\n      <Box display=\"flex\" justifyContent=\"space-between\">\r\n        <Typography sx={{ p: 2 }} variant=\"h4\">\r\n          Inventory\r\n        </Typography>\r\n        <Button\r\n          onClick={() => setEditMode(true)}\r\n          sx={{ m: 2 }}\r\n          size=\"large\"\r\n          variant=\"contained\"\r\n        >\r\n          Create\r\n        </Button>\r\n      </Box>\r\n      <TableContainer component={Paper}>\r\n        <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>#</TableCell>\r\n              <TableCell align=\"left\">Product</TableCell>\r\n              <TableCell align=\"right\">Price</TableCell>\r\n              <TableCell align=\"center\">Type</TableCell>\r\n              <TableCell align=\"center\">Brand</TableCell>\r\n              <TableCell align=\"center\">Quantity</TableCell>\r\n              <TableCell align=\"right\"></TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {products.map((product) => (\r\n              <TableRow\r\n                key={product.id}\r\n                sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\r\n              >\r\n                <TableCell component=\"th\" scope=\"row\">\r\n                  {product.id}\r\n                </TableCell>\r\n                <TableCell align=\"left\">\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <img\r\n                      src={product.pictureUrl}\r\n                      alt={product.name}\r\n                      style={{ height: 50, marginRight: 20 }}\r\n                    />\r\n                    <span>{product.name}</span>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  {currencyFormat(product.price)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">{product.type}</TableCell>\r\n                <TableCell align=\"center\">{product.brand}</TableCell>\r\n                <TableCell align=\"center\">{product.quantityInStock}</TableCell>\r\n                <TableCell align=\"right\">\r\n                  <Button\r\n                    onClick={() => handleSelectProduct(product)}\r\n                    startIcon={<Edit />}\r\n                  />\r\n                  <LoadingButton\r\n                    loading={loading && target === product.id}\r\n                    startIcon={<Delete />}\r\n                    color=\"error\"\r\n                    onClick={() => handleClickOpen(product.id)}\r\n                  />\r\n                  <Dialog\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                  >\r\n                    <DialogTitle id=\"alert-dialog-title\">\r\n                      {\"Use Google's location service?\"}\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                      <DialogContentText id=\"alert-dialog-description\">\r\n                        Are you sure to delete this item ?\r\n                      </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                      <Button onClick={handleClose}>Disagree</Button>\r\n                      <Button\r\n                        color=\"error\"\r\n                        onClick={() => handleDeleteProduct(product.id)}\r\n                        autoFocus\r\n                      >\r\n                        Delete\r\n                      </Button>\r\n                    </DialogActions>\r\n                  </Dialog>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      {metaData && (\r\n        <Box sx={{ pt: 2 }}>\r\n          <AppPagination\r\n            metaData={metaData}\r\n            onPageChange={(page) =>\r\n              dispatch(setPageNumber({ pageNumber: page }))\r\n            }\r\n          />\r\n        </Box>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport Catalog from \"../../features/catalog/Catalog\";\r\nimport Header from \"./Header\";\r\nimport { Container, createTheme, CssBaseline } from \"@material-ui/core\";\r\nimport { ThemeProvider } from \"@emotion/react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport HomePage from \"../../features/home/HomePage\";\r\nimport ProductDetails from \"../../features/catalog/ProductDetails\";\r\nimport AboutPage from \"../../features/about/AboutPage\";\r\nimport ContactPage from \"../../features/contact/ContactPage\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport ServerError from \"../errors/ServerError\";\r\nimport NotFound from \"../errors/NotFound\";\r\nimport BasketPage from \"../../features/basket/BasketPage\";\r\nimport LoadingComponent from \"./LoadingComponent\";\r\nimport { useAppDispatch } from \"../store/configureStore\";\r\nimport { fetchBasketAsync } from \"../../features/basket/basketSlice\";\r\nimport Login from \"../../features/account/Login\";\r\nimport Register from \"../../features/account/Register\";\r\nimport { fetchCurrentUser } from \"../../features/account/accountSlice\";\r\nimport PrivateRoute from \"../layout/PrivateRoute\";\r\nimport Orders from \"../../features/orders/Orders\";\r\nimport CheckoutWrapper from \"../../features/checkout/CheckoutWrapper\";\r\nimport Inventory from \"../../features/admin/Inventory\";\r\n\r\nfunction App() {\r\n  const dispatch = useAppDispatch();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const initApp = useCallback(async () => {\r\n    try {\r\n      await dispatch(fetchCurrentUser());\r\n      await dispatch(fetchBasketAsync());\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    initApp().then(() => setLoading(false));\r\n  }, [initApp]);\r\n\r\n  const [darkMode, setDarkMode] = useState(false);\r\n  const paletteType = darkMode ? \"dark\" : \"light\";\r\n  const theme = createTheme({\r\n    palette: {\r\n      mode: paletteType,\r\n      background: { default: paletteType === \"light\" ? \"#eaeaea\" : \"#121212\" },\r\n    },\r\n  });\r\n\r\n  if (loading) return <LoadingComponent message=\"Initialising app...\" />;\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <ToastContainer position=\"bottom-right\" hideProgressBar />\r\n      <CssBaseline />\r\n      <Header darkMode={darkMode} setDarkMode={setDarkMode} />\r\n      <Route exact path=\"/\" component={HomePage} />\r\n      <Route\r\n        path={\"/(.+)\"}\r\n        render={() => (\r\n          <Container sx={{ mt: 4 }}>\r\n            <Switch>\r\n              <Route exact path=\"/catalog\" component={Catalog} />\r\n              <Route path=\"/catalog/:id\" component={ProductDetails} />\r\n              <Route path=\"/about\" component={AboutPage} />\r\n              <Route path=\"/contact\" component={ContactPage} />\r\n              <Route path=\"/server-error\" component={ServerError} />\r\n              <Route path=\"/basket\" component={BasketPage} />\r\n              <PrivateRoute path=\"/checkout\" component={CheckoutWrapper} />\r\n              <PrivateRoute path=\"/orders\" component={Orders} />\r\n              <PrivateRoute\r\n                roles={[\"Admin\"]}\r\n                path=\"/inventory\"\r\n                component={Inventory}\r\n              />\r\n              <Route path=\"/login\" component={Login} />\r\n              <Route path=\"/register\" component={Register} />\r\n              <Route component={NotFound} />\r\n            </Switch>\r\n          </Container>\r\n        )}\r\n      />\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./app/layout/styles.css\";\r\nimport App from \"./app/layout/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { Router } from \"react-router-dom\";\r\nimport { createBrowserHistory } from \"history\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./app/store/configureStore\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nexport const history = createBrowserHistory();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router history={history}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}